<script>
  // Use localStorage key
  const STORAGE_KEY = 'interscope_isLoggedIn';

  function getLoginState() {
    return localStorage.getItem(STORAGE_KEY) === 'true';
  }

  function setLoginState(state) {
    localStorage.setItem(STORAGE_KEY, state);
  }

  let isLoggedIn = getLoginState();

  function switchForm(formType) {
    document.getElementById('login-box').style.display = formType === 'login' ? 'block' : 'none';
    document.getElementById('signup-box').style.display = formType === 'signup' ? 'block' : 'none';
  }

  function updateAuthLink() {
    const authLink = document.getElementById('auth-link');
    const profileLink = document.getElementById('profile-link');

    authLink.textContent = isLoggedIn ? 'Log Out' : 'Log In';
    profileLink.style.display = isLoggedIn ? 'inline' : 'none';

    authLink.onclick = function(e) {
      e.preventDefault();
      if (isLoggedIn) {
        isLoggedIn = false;
        setLoginState(false);
        alert('Logged out');
        updateAuthLink();
      } else {
        switchForm('login');
        window.scrollTo(0, document.body.scrollHeight);
      }
    };
  }

  updateAuthLink();

  document.getElementById('login-form').addEventListener('submit', function(e) {
    e.preventDefault();
    isLoggedIn = true;
    setLoginState(true);
    alert("Logged in (placeholder)");
    updateAuthLink();
  });

  document.getElementById('signup-form').addEventListener('submit', function(e) {
    e.preventDefault();
    isLoggedIn = true;
    setLoginState(true);
    alert("Account created (placeholder)");
    updateAuthLink();
  });
</script>
